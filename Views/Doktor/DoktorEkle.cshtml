@using webProjeOdev2.Data.Enum;
@model webProjeOdev2.Models.Doktor

@{
    ViewData["Title"] = "DoktorEkle";
}

<h1>DoktorEkle</h1>

<h4>Doktor</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="DoktorEkle">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="doktorAdi" class="control-label"></label>
                <input asp-for="doktorAdi" class="form-control" />
                <span asp-validation-for="doktorAdi" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="doktorSoyadi" class="control-label"></label>
                <input asp-for="doktorSoyadi" class="form-control" />
                <span asp-validation-for="doktorSoyadi" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="dogumTarihi" class="control-label"></label>
                <input asp-for="dogumTarihi" class="form-control" />
                <span asp-validation-for="dogumTarihi" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="cinsiyet" class="control-label"></label>
                <select asp-for="cinsiyet" class="form-control" asp-items="Html.GetEnumSelectList<Doktor.Cinsiyet>()"></select>
                <span asp-validation-for="cinsiyet" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="medeniHal" class="control-label"></label>
                <select asp-for="medeniHal" class="form-control" asp-items="Html.GetEnumSelectList<Doktor.MedeniHal>()"></select>
                <span asp-validation-for="medeniHal" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="telefonNumarasi" class="control-label"></label>
                <input asp-for="telefonNumarasi" class="form-control" />
                <span asp-validation-for="telefonNumarasi" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="email" class="control-label"></label>
                <input asp-for="email" class="form-control" />
                <span asp-validation-for="email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Iller" class="control-label"></label>
                <select asp-for="Iller" class="form-control" asp-items="Html.GetEnumSelectList<Il>()"></select>
                <span asp-validation-for="Iller" class="text-danger"></span>
            </div>
            <div>
                <select asp-for="hastaneId" id="HastaneSecim" asp-items="@ViewBag.HastaneList" onchange="AnaBilimleriDoldur(this,'anaBilimList'); " >
                   
                </select>
            </div>
            
           
            <div>
                <select id="anaBilimList" asp-for="anaBilimDaliId" asp-items="ViewBag.anaBilimDaliId" onchange="KlinikleriDoldur(this,'klinikList');">
                </select>
            </div>
            <div>
                <select id="klinikList" asp-for="klinikId" asp-items="ViewBag.klinikId">
                </select>
            </div>
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts{

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}



<!--
------------------------------



    <script>
        $(function () {

            $("#HastaneSecim").change(function () {
                $("#anaBilimList").empty();
                $.ajax({
                    url: '/Doktor/AnaBilimGetirme',
                    dataType: 'json',
                    data: { id: $("#HastaneSecim").val() },
                    success: function (data) {
                        $("#anaBilimList").append("<option value'-1'> Ana Bilim Secin </option>");

                        $.each(data, (index, value) => {

                            $("#anaBilimList").append(`<option value="${value.value}">${value.text}</option>`);
                        });
                    }

                })
            });
        })
    </script>















-------------------------------


         <div class="form-group">
    <label asp-for="Hastane.hastaneAdi" class="control-label"></label>
    <select asp-for="hastaneId" class="form-control" asp-items="@ViewBag.HastaneList"></select>
    <span asp-validation-for="hastaneId" class="text-danger"></span>
</div>

<div class="form-group">
    <label asp-for="AnaBilimDali.anaBilimDaliAdi" class="control-label"></label>
    <select asp-for="anaBilimDaliId" class ="form-control" asp-items="@ViewBag.AnaBilimDaliList"></select>
    <span asp-validation-for="anaBilimDaliId" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="Klinik.klinikAdi" class="control-label"></label>
    <select asp-for="klinikId" class ="form-control" asp-items="@ViewBag.KlinikList"></select>
    <span asp-validation-for="klinikId" class="text-danger"></span>
</div>



deneme1-------------------------------------
 <script type="text/javascript">
        $(document).ready(function () {
            GetAnaBilimByHastaneId();
        })
        $("#HastaneId").change(function () {
            GetAnaBilimByHastaneId();
        });
        var GetAnaBilimByHastaneId = function () {
            $.ajax({
                url: '@Url.Action("GetAnaBilimByHastaneId","Doktor")',
                type: 'GET',
                data: {
                    hastaneId: $('#hastaneId').val(),
                },
                success: function (data) {
                    $('#anaBilimId').find('option').remove()
                    $(data).each(
                        function (index, item) {
                            $('#anaBilimId').append('<option value="' + item.anaBilimDaliId + '">' + item.anaBilimDaliAdi + '</option>')
                        }
                    );
                }
            })
        }


    </script>
    ----------------------------------

 $(document).ready(function () {
            //Dropdown secme olayi
            $("#HastaneList").change(function () {
                $("#AnaBilimList").empty();
                $.ajax({
                    type: 'GET',
                    url: '@Url.Action("AnaBilimYukle")',

                    dataType: 'json',
                    data: { id: $("#HastaneList").val() },

                    success: function (anabilimdallari) {
                        $("#AnaBilimList").append('<option value="' + -1+'">' +
                            "Ana Bilim Dali Sec" + '</option>');
                        $.each(anabilimdallari, function (i, anabilim) {
                            $("#AnaBilimList").append('<option value="' + anabilim.value + '">' +
                                anabilim.text + '</option>');
                        });
                    },
                    error: function (ex) {
                        alert('Ana bilim getirme hatasi' + ex);
                    }
                });
                return false;
            })
        })






                -->
